\begin{tikzpicture}
\begin{umlseqdiag}
\umlactor{Vendedor}
\umlobject[]{CALINA Origen}
\umlactor{Comprador}
\umlobject[]{CALINA Destino}
\begin{umlcall}[op={iniVenta}]{Vendedor}{CALINA Origen}
	\begin{umlcall}[op={solicitarDinero}]{Vendedor}{Comprador}
		\begin{umlcallself}[op={GenID\_QR},type=synchron, padding=1.5, dt=5]{CALINA Origen}
		\end{umlcallself}
	\end{umlcall}
	\begin{umlcall}[op={solicitarDinero\_QR}, dt=3, padding=0]{Comprador}{CALINA Destino}
		\begin{umlcall}[op={leerID\_QR}, return={QR Code}]{CALINA Destino}{CALINA Origen}
			\begin{umlcallself}[op={Restar\_Dinero},type=synchron, padding=1.5]{CALINA Destino}
			\end{umlcallself}
			\begin{umlcallself}[op={GenDinero\_QR},type=synchron, padding=1.5, dt=-1]{CALINA Destino}
			\end{umlcallself}
		\end{umlcall}
	\end{umlcall}
	\begin{umlcall}[op={leerDinero\_QR}, return={QR Code}, dt=5]{CALINA Origen}{CALINA Destino}
		\begin{umlcallself}[op={Add\_Dinero},type=synchron, padding=1.5]{CALINA Origen}
		\end{umlcallself}
		\begin{umlcallself}[op={Marcar\_Carta},type=synchron, padding=1.5, dt=-1]{CALINA Origen}
		\end{umlcallself}
		\begin{umlcallself}[op={GenTranf\_QR},type=synchron, padding=1.5, dt=-1]{CALINA Origen}
		\end{umlcallself}
	\end{umlcall}
	\begin{umlcall}[op={leerTranf\_QR}, return={QR Code}, dt=5]{CALINA Destino}{CALINA Origen}
		\begin{umlcallself}[op={GenCarta},type=synchron, padding=1.5]{CALINA Destino}
		\end{umlcallself}
	\end{umlcall}
\end{umlcall}
\begin{umlcall}[op={borrarCarta}, padding=0]{Vendedor}{CALINA Origen}
	\begin{umlcallself}[op={borrar\_Carta},type=synchron, padding=1.5]{CALINA Origen}
	\end{umlcallself}
\end{umlcall}
\end{umlseqdiag}
\end{tikzpicture}
